# 如何查看新功能

## 🎉 新功能已集成！

前端 AI 终端系统的 IDE 级别功能已经集成到 `TerminalView.vue` 中。以下是如何查看和使用这些新功能的指南。

---

## 📍 新增的标签页

在 AI 终端界面的**右侧面板**，您现在可以看到以下新标签页：

### 1. ⏱️ 检查点
**位置**: 右侧面板 → "⏱️ 检查点" 标签

**功能**:
- 📜 时间线式展示所有检查点
- 🚀 一键跳转到历史状态
- 🔍 对比当前状态和检查点
- 💾 导出/导入检查点
- 🗑️ 删除不需要的检查点

**如何使用**:
1. 点击右侧面板的 "⏱️ 检查点" 标签
2. 查看时间线上的所有检查点
3. 点击 "🚀 跳转" 按钮回到历史状态
4. 点击 "➕ 创建检查点" 手动创建检查点

---

### 2. ⚠️ 工具批准
**位置**: 右侧面板 → "⚠️ 工具批准" 标签

**功能**:
- 📋 查看待批准的工具调用
- ✅ 批准或 ❌ 拒绝工具执行
- ⚙️ 配置自动批准规则
- 📊 查看批准历史记录
- 🎯 三种批准策略（严格/平衡/宽松）

**如何使用**:
1. 当 AI 尝试执行危险操作时，会出现待批准项
2. 点击右侧面板的 "⚠️ 工具批准" 标签
3. 查看工具详情和风险等级
4. 点击 "✅ 批准" 或 "❌ 拒绝"
5. 点击 "⚙️ 批准设置" 配置自动批准规则

**危险等级说明**:
- 🟢 **低风险**: read_file, search_files（默认自动批准）
- 🟡 **中风险**: modify_file（需要批准）
- 🟠 **高风险**: write_file, execute_command（需要批准）
- 🔴 **极高风险**: delete_file（需要批准）

---

### 3. 📊 会话状态
**位置**: 右侧面板 → "📊 会话状态" 标签

**功能**:
- 🤖 实时显示 Agent 状态
- 📋 任务进度可视化
- 📡 流式状态监控
- 💾 资源统计
- 🕐 决策历史时间线
- ⚡ 性能指标统计

**如何使用**:
1. 点击右侧面板的 "📊 会话状态" 标签
2. 查看 Agent 当前状态（IDLE/RUNNING/PAUSED等）
3. 查看任务完成进度
4. 查看性能指标和资源使用情况
5. 点击 "🔄 刷新" 更新状态
6. 点击 "📤 导出" 导出会话状态

---

### 4. 🧠 决策流程
**位置**: 右侧面板 → "🧠 决策流程" 标签

**功能**:
- 📊 流程图式展示决策过程
- 🔍 查看每个决策的详细信息
- 🛠️ 查看工具调用和执行结果
- 📦 查看状态切片
- 🎭 查看身份信息

**如何使用**:
1. 点击右侧面板的 "🧠 决策流程" 标签
2. 查看 Agent 的决策流程
3. 点击决策卡片右侧的 "▶" 展开详情
4. 查看工具参数、执行结果等
5. 自动滚动会跟随最新决策

**决策类型**:
- 📋 **TASK_LIST**: 任务列表生成
- 🛠️ **TOOL_CALL**: 工具调用
- ✅ **TASK_COMPLETE**: 任务完成
- ⏸️ **PAUSE**: 暂停
- ❌ **ERROR**: 错误

---

## 🚀 快速开始

### 步骤 1: 启动前端服务

```bash
cd vue-app
npm run dev
```

### 步骤 2: 启动后端服务

```bash
cd aispring
mvn spring-boot:run
```

### 步骤 3: 访问 AI 终端

1. 打开浏览器访问: `http://localhost:5173`
2. 登录系统
3. 点击左侧菜单的 "AI终端"

### 步骤 4: 体验新功能

1. **发送一个任务给 AI**:
   ```
   请帮我创建一个简单的网页
   ```

2. **查看决策流程**:
   - 点击右侧面板 "🧠 决策流程" 标签
   - 观察 AI 的决策过程

3. **体验工具批准**:
   - 当 AI 尝试创建文件时
   - 切换到 "⚠️ 工具批准" 标签
   - 查看并批准工具调用

4. **创建检查点**:
   - 切换到 "⏱️ 检查点" 标签
   - 点击 "➕ 创建检查点"
   - 输入描述并创建

5. **监控会话状态**:
   - 切换到 "📊 会话状态" 标签
   - 查看实时状态和性能指标

---

## 🎯 核心改进点

### 1. Agent 循环管理
- ✅ 完整的生命周期管理
- ✅ 决策去重机制
- ✅ 中断和恢复功能

### 2. 检查点系统
- ✅ 时间旅行式回退
- ✅ 文件快照保存
- ✅ 状态对比功能

### 3. 工具批准机制
- ✅ 智能危险等级分类
- ✅ 灵活的批准策略
- ✅ 完整的审计日志

### 4. 状态可视化
- ✅ 实时状态监控
- ✅ 性能指标统计
- ✅ 决策流程展示

---

## 📝 使用技巧

### 技巧 1: 自定义批准规则
1. 进入 "⚠️ 工具批准" 标签
2. 点击 "⚙️ 批准设置"
3. 根据需要开启/关闭自动批准
4. 选择批准策略（推荐使用"平衡模式"）

### 技巧 2: 使用检查点保护工作
1. 在执行重要操作前手动创建检查点
2. 如果 AI 出错，立即跳转回检查点
3. 定期导出重要检查点作为备份

### 技巧 3: 监控 Agent 性能
1. 定期查看 "📊 会话状态" 标签
2. 关注响应时间和 Token 使用
3. 如果性能下降，考虑创建新会话

### 技巧 4: 理解决策流程
1. 在 "🧠 决策流程" 中查看 AI 的思考过程
2. 展开决策详情了解工具参数
3. 查看执行结果判断是否成功

---

## 🐛 常见问题

### Q1: 看不到新标签页？
**A**: 请确保：
1. 前端代码已更新（git pull）
2. 已重新编译（npm run dev）
3. 浏览器已刷新（Ctrl+F5 强制刷新）

### Q2: 工具批准不生效？
**A**: 检查：
1. 后端服务是否正常运行
2. 批准设置是否正确配置
3. 查看浏览器控制台是否有错误

### Q3: 检查点跳转失败？
**A**: 可能原因：
1. 检查点数据不完整
2. 文件系统权限问题
3. 后端服务异常

### Q4: 决策流程不显示？
**A**: 确认：
1. Agent 是否已开始执行
2. 是否有决策历史记录
3. 刷新页面重试

---

## 📚 相关文档

- [前端重构总结](./FRONTEND_REFACTOR_SUMMARY.md)
- [集成指南](./FRONTEND_IDE_INTEGRATION_GUIDE.md)
- [Void-Main 机制解析](./VOID_MAIN_AI_MECHANISM_ANALYSIS.md)
- [重构进度](./REFACTOR_PROGRESS.md)

---

## 💡 反馈与建议

如果您在使用过程中遇到问题或有改进建议，请：

1. 查看浏览器控制台错误信息
2. 查看后端日志
3. 提交 Issue 或联系开发团队

---

**创建日期**: 2025-12-24  
**版本**: 1.0.0  
**状态**: ✅ 可用

